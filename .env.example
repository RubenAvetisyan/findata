# BOA Statement Parser Environment Variables
# Copy this file to .env and modify as needed
#
# All CLI options can be configured here. CLI flags override these values.
# Example: Instead of running:
#   pnpm parse-boa --inputDir "./statements" --ml --model ./models/categorizer --out result.json
# You can set these values here and simply run:
#   pnpm parse-boa

# =============================================================================
# INPUT/OUTPUT SETTINGS
# =============================================================================

# Input directory containing PDF files to process (equivalent to --inputDir)
# If set, the CLI will process all PDFs in this directory
# BOA_INPUT_DIR=C:\Users\YourName\Documents\Statements

# Output file path (equivalent to --out)
# If not set, output goes to stdout
# BOA_OUTPUT_FILE=result.json

# Output format (equivalent to --format)
# Valid values: json, ofx, csv
# Default: json
BOA_FORMAT=json

# Split output into separate files per account (equivalent to --split-accounts)
# Only applies when format is ofx or csv
# Valid values: true, false
# Default: false
# BOA_SPLIT_ACCOUNTS=false

# =============================================================================
# PARSING OPTIONS
# =============================================================================

# Schema version for output format (equivalent to --schema-version)
# Determines which output schema version to use when generating JSON output.
# - v1: Original flat format with a `statements` array. Best for individual statement processing.
# - v2: Rollup format grouped by account with analytics, integrity checks, and aggregated totals.
#       Best for multi-account reporting and financial analysis.
# Valid values: v1, v2
# Default: v2
FINAL_RESULT_SCHEMA_VERSION=v2

# Enable strict validation mode (equivalent to --strict)
# Valid values: true, false
# Default: false
# BOA_STRICT=false

# Pretty-print JSON output (equivalent to --pretty)
# Valid values: true, false
# Default: true
# BOA_PRETTY=true

# Parse as single statement - legacy mode (equivalent to --single)
# Valid values: true, false
# Default: false
# BOA_SINGLE=false

# Enable verbose output with debug info (equivalent to --verbose)
# Valid values: true, false
# Default: false
# BOA_VERBOSE=false

# =============================================================================
# RECURRING TRANSACTION DETECTION
# =============================================================================

# Detect recurring transactions and include in JSON output (equivalent to --detect-recurring)
# Analyzes transaction patterns to identify subscriptions, regular bills, and recurring payments.
# Detects: weekly, bi-weekly, monthly, quarterly, semi-annual, and annual patterns.
# Includes estimated monthly/annual costs and subscription identification.
# Valid values: true, false
# Default: false
# BOA_DETECT_RECURRING=false

# =============================================================================
# ML CATEGORIZATION
# =============================================================================

# Use ML-based categorization in hybrid mode (equivalent to --ml)
# When enabled, uses TensorFlow.js ML model alongside rule-based categorization
# Valid values: true, false
# Default: false
BOA_ML=false

# Path to ML model directory for loading (equivalent to --model)
# Default: ./models/categorizer (when BOA_ML=true)
# If BOA_ML=true and this is not set, defaults to ./models/categorizer
# BOA_MODEL_PATH=./models/categorizer

# Output path for trained ML model (equivalent to --model-out)
# Used with --train-ml to save the trained model
# BOA_MODEL_OUT=./models/categorizer

# Train ML categorizer from parsed transactions (equivalent to --train-ml)
# Valid values: true, false
# Default: false
# BOA_TRAIN_ML=false

# Number of training epochs for ML model (equivalent to --epochs)
# Default: 50
# BOA_EPOCHS=50

# =============================================================================
# NODE.JS RUNTIME
# =============================================================================

# Node.js environment mode
# - development: Enables verbose error messages, development-only features
# - production: Optimizes for performance, minimizes logging
# - test: Used during test execution (set automatically by Vitest)
# Valid values: development, production, test
# Default: development
NODE_ENV=development

# =============================================================================
# TENSORFLOW.JS SETTINGS
# These variables control the ML categorizer's TensorFlow.js backend behavior.
# =============================================================================

# Force a specific TensorFlow.js computation backend
# - cpu: Pure JavaScript CPU backend. Most compatible, works everywhere.
# - webgl: GPU-accelerated via WebGL. Faster for large models but requires GPU.
# - wasm: WebAssembly backend. Good balance of speed and compatibility.
# Valid values: cpu, webgl, wasm
# Default: cpu (for Node.js)
# TF_FORCE_BACKEND=cpu

# TensorFlow C++ logging verbosity (when using native bindings like @tensorflow/tfjs-node)
# - 0: All logs (DEBUG, INFO, WARNING, ERROR)
# - 1: INFO and above
# - 2: WARNING and above (suppresses most logs)
# - 3: ERROR only
# Valid values: 0, 1, 2, 3
# Default: 0
# TF_CPP_MIN_LOG_LEVEL=2

# Intel oneDNN (formerly MKL-DNN) optimizations
# - 1: Enable oneDNN optimizations (faster on Intel CPUs)
# - 0: Disable oneDNN (useful if experiencing compatibility issues or warnings)
# Valid values: 0, 1
# Default: 1
# TF_ENABLE_ONEDNN_OPTS=0

# =============================================================================
# SUPABASE DATABASE INTEGRATION
# =============================================================================

# Supabase project URL
# Get this from your Supabase project settings > API
# Example: https://your-project-id.supabase.co
# SUPABASE_URL=

# Supabase anonymous key (for client-side operations)
# Get this from your Supabase project settings > API > anon public
# SUPABASE_ANON_KEY=

# Supabase service role key (optional, for server-side operations)
# Get this from your Supabase project settings > API > service_role
# WARNING: Keep this secret! Never expose in client-side code.
# SUPABASE_SERVICE_ROLE_KEY=

# Supabase database password (required for auto-migration)
# Get this from your Supabase project settings > Settings > Database > Database password
# Used by: pnpm parse-boa migrate --auto
# WARNING: Keep this secret!
# SUPABASE_DB_PASSWORD=

# Default user ID for CLI uploads (equivalent to --user-id)
# This should be a valid UUID that matches your Supabase auth user
# Required when using --upload flag
# BOA_USER_ID=

# Enable upload to Supabase by default (equivalent to --upload)
# Valid values: true, false
# Default: false
# BOA_UPLOAD=false

# =============================================================================
# PLAID API INTEGRATION
# =============================================================================

# Plaid API client ID
# Get this from your Plaid Dashboard > Team Settings > Keys
# PLAID_CLIENT_ID=

# Plaid API secret
# Get this from your Plaid Dashboard > Team Settings > Keys
# Use the secret for your target environment (sandbox or production)
# WARNING: Keep this secret! Never expose in client-side code.
# PLAID_SECRET=

# Plaid environment
# - sandbox: For development and testing with test credentials
# - production: For live banking connections
# Note: Development environment was decommissioned by Plaid
# Valid values: sandbox, production
# Default: sandbox
PLAID_ENV=sandbox

# Plaid webhook URL (optional)
# URL where Plaid will send webhook notifications for transaction updates,
# item status changes, etc. Must be publicly accessible HTTPS endpoint.
# PLAID_WEBHOOK_URL=

# Plaid redirect URI (required for OAuth-based bank connections in production)
# Must use HTTPS in production (Plaid requirement). HTTP only allowed in sandbox.
# Must be registered in your Plaid Dashboard > Team Settings > API > Allowed redirect URIs
# PLAID_REDIRECT_URI=https://localhost:8484/oauth-callback

# =============================================================================
# DEBUGGING
# =============================================================================

# Enable debug logging for specific modules using the `debug` package pattern
# Examples:
#   DEBUG=boa-parser:*                           # Enable all boa-parser debug logs
#   DEBUG=boa-parser:extractor                   # Enable specific module debugging
#   DEBUG=boa-parser:parser,boa-parser:categorizer  # Multiple patterns
# Default: (none)
# DEBUG=

# Disable ANSI color codes in console output
# Useful for logging to files or CI environments
# Valid values: 1 (to disable)
# Default: (none - colors enabled)
# NO_COLOR=1

# Force ANSI color codes even when output is not a TTY
# Overrides NO_COLOR
# Valid values: 1 (to force)
# Default: (none)
# FORCE_COLOR=1
